{
  "master": {
    "tasks": [
      {
        "id": 1,
        "title": "Foundation Setup: Monorepo & Firebase Configuration",
        "description": "Initialize Turborepo monorepo structure, configure Firebase (Firestore, Auth, Storage), and set up base UI component library with Tailwind CSS",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "details": "1. Initialize Turborepo with workspaces for web (Next.js 14) and mobile (React Native Expo)\n2. Configure Firebase project with Firestore database, Authentication (email/password + OAuth), and Storage\n3. Set up shared UI component library with Tailwind CSS design system\n4. Configure TypeScript for all workspaces\n5. Set up environment variables and configuration files\n\nTech Stack: Turborepo, Next.js 14 App Router, React Native Expo, Firebase, TypeScript, Tailwind CSS",
        "testStrategy": "Verify monorepo builds successfully, Firebase connection works, and base components render correctly",
        "updatedAt": "2025-12-03T22:32:16.396Z",
        "subtasks": []
      },
      {
        "id": 2,
        "title": "Core UI Shell: Landing Page & Dashboard Layouts",
        "description": "Create landing page and skeleton dashboard layouts for player, teacher, and admin roles with navigation and responsive design",
        "status": "done",
        "dependencies": [
          "1"
        ],
        "priority": "high",
        "details": "1. Build landing page with hero section, features, and CTA\n2. Create dashboard shell components for each role (player/teacher/admin)\n3. Implement responsive navigation with role-based menu items\n4. Set up mobile screen skeletons for Expo app\n5. Apply consistent design system (TouchBase brand colors, typography)\n\nComponents: LandingPage, PlayerDashboard, TeacherDashboard, AdminDashboard, Navigation, MobileLayout",
        "testStrategy": "Test responsive layouts across devices, verify navigation works, and check role-based UI rendering",
        "subtasks": [],
        "updatedAt": "2025-12-03T23:19:00.486Z"
      },
      {
        "id": 3,
        "title": "Authentication & User Management System",
        "description": "Implement Firebase Authentication with multi-role support (player/teacher/admin), profile management with photo upload, and role-based access control",
        "status": "done",
        "dependencies": [
          "1"
        ],
        "priority": "high",
        "details": "1. Integrate Firebase Auth with email/password and OAuth providers\n2. Create user profile schema in Firestore (roles, default_org_id, photo_url)\n3. Build profile management UI with image upload to Firebase Storage\n4. Implement role-based routing middleware (Next.js middleware.ts)\n5. Create Firestore security rules for role-based access\n6. Build signup/login flows for each role type\n\nAPI Routes: /api/auth/signup, /api/auth/login, /api/auth/signout\nSecurity: Firestore rules based on user.role and org_id",
        "testStrategy": "Test authentication flows, verify role-based access control, test image upload, and validate security rules",
        "subtasks": [],
        "updatedAt": "2025-12-03T23:24:28.840Z"
      },
      {
        "id": 4,
        "title": "Registration Modules: Player, Teacher & Class Registration",
        "description": "Build registration forms for players, teachers, and class creation with data persistence, image upload, and CSV export functionality",
        "status": "done",
        "dependencies": [
          "2",
          "3"
        ],
        "priority": "medium",
        "details": "1. Create player registration form (name, email, role selection)\n2. Create teacher registration form (name, email, school/org)\n3. Build class creation form (name, code generation, teacher assignment)\n4. Implement image upload to Firebase Storage with preview\n5. Add CSV export functionality for user/class lists\n6. Create invite code system for class enrollment\n\nComponents: PlayerRegistrationForm, TeacherRegistrationForm, ClassCreationForm, ImageUpload, CSVExport",
        "testStrategy": "Test form validation, image upload, data persistence, CSV export, and invite code generation",
        "subtasks": [],
        "updatedAt": "2025-12-03T23:28:21.319Z"
      },
      {
        "id": 5,
        "title": "Attendance System with Analytics & Streak Tracking",
        "description": "Implement attendance marking (present/late/absent), daily analytics dashboard, and streak tracking system with recovery mechanisms",
        "status": "done",
        "dependencies": [
          "3",
          "4"
        ],
        "priority": "medium",
        "details": "1. Build attendance marking UI (teacher view with student list)\n2. Create Firestore schema: attendance collection (class_id, date, student_id, status)\n3. Implement daily analytics (attendance rate, trends)\n4. Build streak tracking system (consecutive days present)\n5. Add streak recovery mechanism (grace period)\n6. Create attendance history view\n\nAPI Routes: /api/attendance/mark, /api/attendance/class/[classId], /api/attendance/analytics\nCollections: touchbase_attendance (class_id, date, student_id, status, created_at)",
        "testStrategy": "Test attendance marking, verify analytics calculations, test streak tracking logic, and validate recovery mechanism",
        "subtasks": [],
        "updatedAt": "2025-12-03T23:31:22.250Z"
      },
      {
        "id": 6,
        "title": "Scheduling System: Class Schedule Builder & Weekly Agenda",
        "description": "Create class schedule builder for teachers, weekly agenda view for students, and push notification system for schedule reminders",
        "status": "done",
        "dependencies": [
          "4"
        ],
        "priority": "medium",
        "details": "1. Build schedule builder UI (day/time selection, recurring patterns)\n2. Create Firestore schema: schedules collection (class_id, day_of_week, time, location)\n3. Implement weekly agenda view for students (upcoming classes)\n4. Set up push notification service (Firebase Cloud Messaging)\n5. Create notification triggers for schedule reminders\n6. Build schedule editing and deletion functionality\n\nAPI Routes: /api/schedules/create, /api/schedules/class/[classId], /api/schedules/update\nMobile: Expo Notifications for push alerts",
        "testStrategy": "Test schedule creation, verify weekly agenda display, test push notifications, and validate recurring pattern logic",
        "subtasks": [],
        "updatedAt": "2025-12-03T23:33:34.734Z"
      },
      {
        "id": 7,
        "title": "Curriculum & Module Engine: Lesson Player & Progress Tracking",
        "description": "Build module structure (steps, content, quizzes, scenarios), interactive lesson player, quiz engine, and progress state persistence",
        "status": "done",
        "dependencies": [
          "2",
          "3"
        ],
        "priority": "high",
        "details": "1. Design Firestore schema: modules collection (title, description, skill_category, difficulty)\n2. Create module steps subcollection (step_type: lesson/quiz/scenario, content, order)\n3. Build interactive lesson player component (text, video, audio, images)\n4. Implement quiz engine (multiple choice, true/false, scoring)\n5. Create scenario/interactive content renderer\n6. Build progress tracking system (per-user-per-module state)\n7. Implement progress persistence (Firestore: progress collection)\n\nAPI Routes: /api/modules/list, /api/modules/[id], /api/modules/[id]/steps, /api/progress/update\nCollections: touchbase_modules, touchbase_modules/{id}/steps, touchbase_progress",
        "testStrategy": "Test module rendering, quiz functionality, progress tracking, and verify state persistence across sessions",
        "subtasks": [],
        "updatedAt": "2025-12-03T23:34:53.675Z"
      },
      {
        "id": 8,
        "title": "Gamification System: XP, Levels, Badges & Challenges",
        "description": "Implement XP calculation system, multi-level progression (global + per-skill), badge awards, streak system, and class challenges with leaderboards",
        "status": "done",
        "dependencies": [
          "5",
          "7"
        ],
        "priority": "medium",
        "details": "1. Design XP calculation rules (per action type: lesson completion, quiz score, attendance)\n2. Implement level system (global level + per-skill levels)\n3. Create badge system (event-triggered + teacher-awarded)\n4. Build streak system integration with attendance\n5. Create challenge system (class/global challenges)\n6. Implement optional leaderboards (class/global)\n7. Build skill tree visualization\n\nAPI Routes: /api/xp/award, /api/badges/list, /api/badges/user, /api/challenges/create, /api/leaderboards/class\nCloud Functions: XP calculation triggers, badge award automation",
        "testStrategy": "Test XP calculations, verify level progression, test badge awards, validate challenge system, and check leaderboard accuracy",
        "subtasks": [],
        "updatedAt": "2025-12-03T23:35:33.034Z"
      },
      {
        "id": 9,
        "title": "AI Integration: Player Coach, Teacher Assistant & Adaptive Learning",
        "description": "Build AI Gateway via Cloud Functions, player AI coach chat, teacher AI assistant for lesson planning, and adaptive learning engine with safety filters",
        "status": "done",
        "dependencies": [
          "7"
        ],
        "priority": "low",
        "details": "1. Create AI Gateway Cloud Function (OpenAI/Gemini integration)\n2. Build player AI coach chat interface (contextual hints, explanations, reflection prompts)\n3. Implement teacher AI assistant (generate discussion prompts, lesson plans, adaptations)\n4. Create adaptive learning engine (personalized content recommendations)\n5. Add safety filters (content moderation, age-appropriate tone)\n6. Implement opt-out controls for AI features\n7. Add rate limiting and usage tracking\n\nAPI Routes: /api/ai/coach, /api/ai/explanation, /api/ai/hint\nCloud Functions: ai-gateway (with guardrails, rate limiting)\nSafety: Content filters, moderation API integration",
        "testStrategy": "Test AI responses, verify safety filters, test rate limiting, validate adaptive recommendations, and check opt-out functionality",
        "subtasks": [],
        "updatedAt": "2025-12-03T23:35:57.887Z"
      },
      {
        "id": 10,
        "title": "Analytics & Insights: Teacher Dashboard, Admin Analytics & Experiments",
        "description": "Build teacher analytics dashboard (skill heatmaps, at-risk indicators), admin analytics (adoption, engagement), early warning system, and A/B testing framework",
        "status": "done",
        "dependencies": [
          "5",
          "7",
          "8"
        ],
        "priority": "low",
        "details": "1. Create teacher analytics dashboard (skill heatmaps, time-series performance, at-risk student indicators)\n2. Build admin analytics dashboard (adoption metrics, engagement rates, impact metrics)\n3. Implement early warning system (rule-based student risk detection)\n4. Create feature flags system (Firestore: featureFlags collection)\n5. Build A/B testing framework (experiment configuration, variant assignment, results tracking)\n6. Integrate PostHog for product analytics\n7. Create custom event tracking system\n\nAPI Routes: /api/analytics/students, /api/analytics/classes, /api/admin/analytics\nCollections: touchbase_feature_flags, touchbase_experiments\nAnalytics: PostHog integration, custom event tracking",
        "testStrategy": "Test analytics calculations, verify heatmap rendering, test early warning triggers, validate A/B test framework, and check PostHog integration",
        "subtasks": [],
        "updatedAt": "2025-12-03T23:41:18.796Z"
      }
    ],
    "metadata": {
      "version": "1.0.0",
      "lastModified": "2025-12-03T23:41:18.797Z",
      "taskCount": 10,
      "completedCount": 10,
      "tags": [
        "master"
      ],
      "created": "2025-12-15T17:52:29.573Z",
      "description": "Tasks for master context"
    }
  },
  "qa-testing": {
    "tasks": [
      {
        "id": 1,
        "title": "Fix LoadingSpinner undefined in TeachersTable",
        "description": "CRITICAL: components/teachers/TeachersTable.tsx line 49 throws ReferenceError because LoadingSpinner is not imported",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 2,
        "title": "Create mock org data for dev mode",
        "description": "7 sections show JSON error because dev-org mock does not exist in Supabase. Create seed data or modify APIs to handle missing org gracefully.",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 3,
        "title": "Fix OrgDropdown JSON error in navigation",
        "description": "OrgDropdown component shows JSON parse error in navigation menu when org data is not available",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 4,
        "title": "Refactor TeamsTable to use Table component",
        "description": "Migrate TeamsTable.tsx from raw HTML table to use the new Table component library created in SPRINT_FRONTEND_REMEDIATION",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 5,
        "title": "Refactor GamesTable to use Table component",
        "description": "Migrate GamesTable.tsx from raw HTML table to use the new Table component library (already uses correct design tokens)",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 6,
        "title": "Refactor TeachersTable to use Table component",
        "description": "Migrate TeachersTable.tsx from raw HTML table to use the new Table component library. Also add edit/delete actions.",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 7,
        "title": "Fix i18n in student/assignments page",
        "description": "Add i18n translations throughout student/assignments/[id]/page.tsx (currently has TODO comment)",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 8,
        "title": "Fix i18n in admin/organizations page",
        "description": "Add i18n translations throughout admin/organizations/[id]/page.tsx (currently has TODO comment)",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 9,
        "title": "Implement placement tests modal UI",
        "description": "Create modal UI for placement test creation in dashboard/placement-tests/page.tsx (currently has TODO and useState)",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 10,
        "title": "Create Toast/Snackbar component",
        "description": "Design and implement Toast component for success/error notifications (Priority 4 from SPRINT_FRONTEND_REMEDIATION). Replace alert() calls.",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 11,
        "title": "Create Dropdown Menu component",
        "description": "Design and implement Dropdown Menu component for action menus in tables (Priority 4 from SPRINT_FRONTEND_REMEDIATION)",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 12,
        "title": "Create Avatar component",
        "description": "Design and implement Avatar component for user photos (Priority 4 from SPRINT_FRONTEND_REMEDIATION, currently inline in TeachersTable)",
        "details": "",
        "testStrategy": "",
        "status": "done",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 13,
        "title": "SPRINT 2.1: BMAD STORY-01.2 - Theme Provider Component",
        "description": "Implement Theme Provider component for whitelabel theming with CSS variables and context",
        "details": "Create ThemeProvider component that wraps app and provides tenant-specific theme via CSS variables. Support light/dark modes and custom brand colors.",
        "testStrategy": "Unit tests for theme context, visual tests for color switching",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 14,
        "title": "SPRINT 2.2: BMAD STORY-01.3 - Tenant Themes Database Schema",
        "description": "Create database schema for tenant_themes table with color palettes, fonts, and branding assets",
        "details": "Migration for tenant_themes table with columns: org_id, primary_color, secondary_color, accent_color, logo_url, font_family, dark_mode_enabled",
        "testStrategy": "Database migration tests, RLS policy tests",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 15,
        "title": "SPRINT 2.3: BMAD STORY-01.4 - RBAC Middleware Implementation",
        "description": "Implement Role-Based Access Control middleware for owner, admin, coach, viewer roles",
        "details": "Create middleware to enforce role permissions at route level. Add roles table and user_roles junction table. Implement permission checks in API routes.",
        "testStrategy": "E2E tests for role access control, unit tests for permission logic",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 16,
        "title": "SPRINT 2.4: BMAD STORY-01.5 - Module Registry System",
        "description": "Create module registry with enable/disable flags per tenant for feature gating",
        "details": "Add modules table with name, description, enabled_by_default. Add tenant_modules junction for per-tenant overrides. Create ModuleGuard component.",
        "testStrategy": "Tests for module visibility, admin UI tests",
        "status": "done",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 17,
        "title": "SPRINT 2.5: BMAD STORY-01.6 - Permission Hooks & Guards",
        "description": "Create React hooks and guards for permission checks in components and routes",
        "details": "Implement usePermission(), useRole(), RequirePermission component, ProtectedRoute wrapper. Integrate with existing auth system.",
        "testStrategy": "Unit tests for hooks, E2E tests for protected routes",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 18,
        "title": "SPRINT 3.1: Teachers Module - Database Schema",
        "description": "Create teachers/staff table mirroring players structure with certifications and specializations",
        "details": "Migration for teachers table with fields: name, email, certifications[], specializations[], years_experience, bio, department, status. Add RLS policies.",
        "testStrategy": "Migration tests, CRUD API tests",
        "status": "pending",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 19,
        "title": "SPRINT 3.2: Teachers Module - CRUD Implementation",
        "description": "Implement teachers CRUD operations, list view, detail view, registration wizard",
        "details": "Create API routes, service layer, components for teachers management. Use existing UI components (Table, Avatar, Form primitives).",
        "testStrategy": "E2E tests for teacher registration and management",
        "status": "pending",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 20,
        "title": "SPRINT 3.3: Classes Module - Database Schema & API",
        "description": "Create classes table with enrollment system and scheduling integration",
        "details": "Migration for classes table (name, level, schedule, teacher_id, max_students) and enrollments junction table (class_id, student_id, enrolled_date, status). API routes for CRUD.",
        "testStrategy": "Database tests, enrollment API tests",
        "status": "pending",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 21,
        "title": "SPRINT 3.4: Classes Module - UI Components",
        "description": "Build classes list view, class detail, enrollment management UI",
        "details": "Create ClassesList, ClassDetail, EnrollmentManager components using Table, Card, Badge primitives. Add class creation wizard.",
        "testStrategy": "E2E tests for class creation and enrollment",
        "status": "pending",
        "dependencies": [],
        "priority": "high",
        "subtasks": []
      },
      {
        "id": 22,
        "title": "SPRINT 4.1: Attendance System - Database & API",
        "description": "Create attendance tracking system with date-based records",
        "details": "Migration for attendance table (class_id, student_id, date, status: present/absent/excused/late, notes). API for take attendance and reports.",
        "testStrategy": "API tests for attendance CRUD, report generation tests",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 23,
        "title": "SPRINT 4.2: Attendance System - Take Attendance UI",
        "description": "Build UI for teachers to take attendance with quick entry and bulk actions",
        "details": "Create AttendanceSheet component with quick toggle for present/absent, bulk actions, date picker, class selector. Mobile-optimized.",
        "testStrategy": "E2E tests for attendance taking workflow",
        "status": "pending",
        "dependencies": [],
        "priority": "medium",
        "subtasks": []
      },
      {
        "id": 24,
        "title": "SPRINT 4.3: Attendance Reports Dashboard",
        "description": "Create attendance reports with visualizations and exports",
        "details": "Build reports page with filters (date range, class, student), charts for attendance trends, CSV export. Use existing Chart components.",
        "testStrategy": "Visual tests for charts, export functionality tests",
        "status": "pending",
        "dependencies": [],
        "priority": "low",
        "subtasks": []
      }
    ],
    "metadata": {
      "created": "2025-12-15T17:52:29.573Z",
      "updated": "2025-12-20T18:42:00.636Z",
      "description": "QA Testing sistem√°tico de todas las secciones"
    }
  }
}